"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/upload-to-odoo";
exports.ids = ["pages/api/upload-to-odoo"];
exports.modules = {

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fupload-to-odoo&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cupload-to-odoo.js&middlewareConfigBase64=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fupload-to-odoo&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cupload-to-odoo.js&middlewareConfigBase64=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _src_pages_api_upload_to_odoo_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src\\pages\\api\\upload-to-odoo.js */ \"(api)/./src/pages/api/upload-to-odoo.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_upload_to_odoo_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_upload_to_odoo_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/upload-to-odoo\",\n        pathname: \"/api/upload-to-odoo\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _src_pages_api_upload_to_odoo_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnVwbG9hZC10by1vZG9vJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGc3JjJTVDcGFnZXMlNUNhcGklNUN1cGxvYWQtdG8tb2Rvby5qcyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDTDtBQUMxRDtBQUNpRTtBQUNqRTtBQUNBLGlFQUFlLHdFQUFLLENBQUMsNkRBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLDZEQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLGdIQUFtQjtBQUNsRDtBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCIsInNvdXJjZXMiOlsid2VicGFjazovL2ZhY2lsaXR5bWFuYWdlbWVudGNoZWNrbGlzdC8/YmUxNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vc3JjXFxcXHBhZ2VzXFxcXGFwaVxcXFx1cGxvYWQtdG8tb2Rvby5qc1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3VwbG9hZC10by1vZG9vXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvdXBsb2FkLXRvLW9kb29cIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fupload-to-odoo&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cupload-to-odoo.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./src/pages/api/upload-to-odoo.js":
/*!*****************************************!*\
  !*** ./src/pages/api/upload-to-odoo.js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n// pages/api/upload-to-odoo.js\nasync function handler(req, res) {\n    if (req.method !== \"POST\") {\n        res.setHeader(\"Allow\", [\n            \"POST\"\n        ]);\n        return res.status(405).end(`Method ${req.method} Not Allowed`);\n    }\n    // 1) Récup input du front\n    const { assetId, pdfBase64, date, building_envelope, exterior_facilities, interior_areas, technical_equipment, sustainability_esg, significant_structural_defects, location_market_situation } = req.body || {};\n    if (!assetId || !pdfBase64) {\n        return res.status(400).json({\n            error: \"assetId et pdfBase64 requis\"\n        });\n    }\n    // 2) Mapping asset_id -> res_id (mets tes vraies correspondances ici)\n    const assetMap = {\n        AC1: 1,\n        AC2: 104,\n        AC3: 147,\n        AC4: 322,\n        AD1: 2143,\n        AD2: 2218,\n        AD3: 2227\n    };\n    const resId = assetMap[assetId];\n    if (!resId) {\n        return res.status(400).json({\n            error: `Pas de mapping pour Asset ${assetId}`\n        });\n    }\n    // ---- Helpers ----\n    // Convertit vers float arrondi à 1 décimale, gère \"7,5\", vide => null\n    const asFloat1 = (v)=>{\n        if (v === null || v === undefined || v === \"\") return null;\n        const s = String(v).trim().replace(/\\s/g, \"\").replace(\",\", \".\");\n        const n = Number(s);\n        if (Number.isNaN(n)) return null;\n        return Math.round(n * 10) / 10;\n    };\n    // Appel JSON-RPC générique\n    async function odooRpc(model, method, ...odooArgs) {\n        const payload = {\n            jsonrpc: \"2.0\",\n            method: \"call\",\n            params: {\n                service: \"object\",\n                method: \"execute_kw\",\n                args: [\n                    process.env.ODOO_DB,\n                    parseInt(process.env.ODOO_UID, 10),\n                    process.env.ODOO_API_KEY,\n                    model,\n                    method,\n                    ...odooArgs\n                ]\n            },\n            id: Date.now()\n        };\n        const r = await fetch(`${process.env.ODOO_URL}/jsonrpc`, {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify(payload)\n        });\n        const data = await r.json();\n        if (data?.error) {\n            // remonte l’erreur Odoo lisible\n            const msg = typeof data.error === \"string\" ? data.error : JSON.stringify(data.error, null, 2);\n            throw new Error(msg);\n        }\n        return data.result;\n    }\n    // Champs à écrire (float 1 décimale ou null)\n    const fieldsToWrite = {\n        building_envelope: asFloat1(building_envelope),\n        exterior_facilities: asFloat1(exterior_facilities),\n        interior_areas: asFloat1(interior_areas),\n        technical_equipment: asFloat1(technical_equipment),\n        sustainability_esg: asFloat1(sustainability_esg),\n        significant_structural_defects: asFloat1(significant_structural_defects),\n        location_market_situation: asFloat1(location_market_situation)\n    };\n    // Nettoie les undefined (Odoo n’aime pas trop)\n    for (const k of Object.keys(fieldsToWrite)){\n        if (fieldsToWrite[k] === undefined) fieldsToWrite[k] = null;\n    }\n    // 3) Build payload attachement PDF (créé sur property.property)\n    const attachArgs = [\n        \"ir.attachment\",\n        \"create\",\n        [\n            {\n                name: `Pruefbericht_${assetId}_${date || \"\"}.pdf`,\n                datas: pdfBase64,\n                mimetype: \"application/pdf\",\n                res_model: \"property.property\",\n                res_id: resId\n            }\n        ]\n    ];\n    try {\n        // (A) créer l’attachement\n        const attachmentId = await odooRpc(...attachArgs);\n        // (B) écrire les 7 champs sur property.property\n        const writeOk = await odooRpc(\"property.property\", \"write\", [\n            [\n                resId\n            ],\n            fieldsToWrite\n        ]);\n        // (C) read-back pour vérifier ce qui est vraiment stocké\n        const readBack = await odooRpc(\"property.property\", \"read\", [\n            [\n                resId\n            ],\n            Object.keys(fieldsToWrite)\n        ]);\n        // Compare brut (attention: Odoo peut arrondir/formatter)\n        const beforeAfter = {};\n        for (const k of Object.keys(fieldsToWrite)){\n            beforeAfter[k] = {\n                sent: fieldsToWrite[k],\n                stored: readBack?.[0]?.[k] ?? null\n            };\n        }\n        // Détecter si au moins une valeur correspond (changement visible)\n        const propertyWriteChanged = Object.keys(beforeAfter).some((k)=>{\n            // Comparaison tolérante aux floats (arrondi 1 décimale)\n            const sent = beforeAfter[k].sent;\n            const stored = beforeAfter[k].stored;\n            if (sent === null && stored === null) return true;\n            if (sent === null || stored === null) return false;\n            return Math.round(Number(stored) * 10) === Math.round(Number(sent) * 10);\n        });\n        // Réponse OK (on renvoie aussi le readBack pour tracer côté front si besoin)\n        return res.status(200).json({\n            attachmentId,\n            writeOk: writeOk === true,\n            propertyWriteChanged,\n            values: beforeAfter\n        });\n    } catch (err) {\n        // Cas “PDF attaché mais write KO” → on n’a pas d’attachmentId fiable si l’erreur vient après (donc 500 simple)\n        return res.status(500).json({\n            error: err.message || \"Erreur inconnue c\\xf4t\\xe9 Odoo\"\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvcGFnZXMvYXBpL3VwbG9hZC10by1vZG9vLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQSw4QkFBOEI7QUFFZixlQUFlQSxRQUFRQyxHQUFHLEVBQUVDLEdBQUc7SUFDNUMsSUFBSUQsSUFBSUUsTUFBTSxLQUFLLFFBQVE7UUFDekJELElBQUlFLFNBQVMsQ0FBQyxTQUFTO1lBQUM7U0FBTztRQUMvQixPQUFPRixJQUFJRyxNQUFNLENBQUMsS0FBS0MsR0FBRyxDQUFDLENBQUMsT0FBTyxFQUFFTCxJQUFJRSxNQUFNLENBQUMsWUFBWSxDQUFDO0lBQy9EO0lBRUEsMEJBQTBCO0lBQzFCLE1BQU0sRUFDSkksT0FBTyxFQUNQQyxTQUFTLEVBQ1RDLElBQUksRUFDSkMsaUJBQWlCLEVBQ2pCQyxtQkFBbUIsRUFDbkJDLGNBQWMsRUFDZEMsbUJBQW1CLEVBQ25CQyxrQkFBa0IsRUFDbEJDLDhCQUE4QixFQUM5QkMseUJBQXlCLEVBQzFCLEdBQUdmLElBQUlnQixJQUFJLElBQUksQ0FBQztJQUVqQixJQUFJLENBQUNWLFdBQVcsQ0FBQ0MsV0FBVztRQUMxQixPQUFPTixJQUFJRyxNQUFNLENBQUMsS0FBS2EsSUFBSSxDQUFDO1lBQUVDLE9BQU87UUFBOEI7SUFDckU7SUFFQSxzRUFBc0U7SUFDdEUsTUFBTUMsV0FBVztRQUNmQyxLQUFLO1FBQ0xDLEtBQUs7UUFDTEMsS0FBSztRQUNMQyxLQUFLO1FBQ0xDLEtBQUs7UUFDTEMsS0FBSztRQUNMQyxLQUFLO0lBQ1A7SUFFQSxNQUFNQyxRQUFRUixRQUFRLENBQUNiLFFBQVE7SUFDL0IsSUFBSSxDQUFDcUIsT0FBTztRQUNWLE9BQU8xQixJQUFJRyxNQUFNLENBQUMsS0FBS2EsSUFBSSxDQUFDO1lBQUVDLE9BQU8sQ0FBQywwQkFBMEIsRUFBRVosUUFBUSxDQUFDO1FBQUM7SUFDOUU7SUFFQSxvQkFBb0I7SUFFcEIsc0VBQXNFO0lBQ3RFLE1BQU1zQixXQUFXLENBQUNDO1FBQ2hCLElBQUlBLE1BQU0sUUFB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YSxDQUFDQyxFQUFFO2dCQUN0QmMsUUFBUUgsVUFBVSxDQUFDLEVBQUUsRUFBRSxDQUFDWCxFQUFFLElBQUk7WUFDaEM7UUFDRjtRQUVBLGtFQUFrRTtRQUNsRSxNQUFNZSx1QkFBdUJkLE9BQU9DLElBQUksQ0FBQ1UsYUFBYUksSUFBSSxDQUFDLENBQUNoQjtZQUMxRCx3REFBd0Q7WUFDeEQsTUFBTWEsT0FBT0QsV0FBVyxDQUFDWixFQUFFLENBQUNhLElBQUk7WUFDaEMsTUFBTUMsU0FBU0YsV0FBVyxDQUFDWixFQUFFLENBQUNjLE1BQU07WUFDcEMsSUFBSUQsU0FBUyxRQUFRQyxXQUFXLE1BQU0sT0FBTztZQUM3QyxJQUFJRCxTQUFTLFFBQVFDLFdBQVcsTUFBTSxPQUFPO1lBQzdDLE9BQU81QyxLQUFLQyxLQUFLLENBQUNILE9BQU84QyxVQUFVLFFBQVE1QyxLQUFLQyxLQUFLLENBQUNILE9BQU82QyxRQUFRO1FBQ3ZFO1FBRUEsNkVBQTZFO1FBQzdFLE9BQU9oRixJQUFJRyxNQUFNLENBQUMsS0FBS2EsSUFBSSxDQUFDO1lBQzFCNEQ7WUFDQUMsU0FBU0EsWUFBWTtZQUNyQks7WUFDQUUsUUFBUUw7UUFDVjtJQUNGLEVBQUUsT0FBT00sS0FBSztRQUNaLCtHQUErRztRQUMvRyxPQUFPckYsSUFBSUcsTUFBTSxDQUFDLEtBQUthLElBQUksQ0FBQztZQUMxQkMsT0FBT29FLElBQUlDLE9BQU8sSUFBSTtRQUN4QjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mYWNpbGl0eW1hbmFnZW1lbnRjaGVja2xpc3QvLi9zcmMvcGFnZXMvYXBpL3VwbG9hZC10by1vZG9vLmpzP2FkY2IiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gcGFnZXMvYXBpL3VwbG9hZC10by1vZG9vLmpzXHJcblxyXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcSwgcmVzKSB7XHJcbiAgaWYgKHJlcS5tZXRob2QgIT09IFwiUE9TVFwiKSB7XHJcbiAgICByZXMuc2V0SGVhZGVyKFwiQWxsb3dcIiwgW1wiUE9TVFwiXSk7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDUpLmVuZChgTWV0aG9kICR7cmVxLm1ldGhvZH0gTm90IEFsbG93ZWRgKTtcclxuICB9XHJcblxyXG4gIC8vIDEpIFLDqWN1cCBpbnB1dCBkdSBmcm9udFxyXG4gIGNvbnN0IHtcclxuICAgIGFzc2V0SWQsXHJcbiAgICBwZGZCYXNlNjQsXHJcbiAgICBkYXRlLFxyXG4gICAgYnVpbGRpbmdfZW52ZWxvcGUsXHJcbiAgICBleHRlcmlvcl9mYWNpbGl0aWVzLFxyXG4gICAgaW50ZXJpb3JfYXJlYXMsXHJcbiAgICB0ZWNobmljYWxfZXF1aXBtZW50LFxyXG4gICAgc3VzdGFpbmFiaWxpdHlfZXNnLFxyXG4gICAgc2lnbmlmaWNhbnRfc3RydWN0dXJhbF9kZWZlY3RzLFxyXG4gICAgbG9jYXRpb25fbWFya2V0X3NpdHVhdGlvbixcclxuICB9ID0gcmVxLmJvZHkgfHwge307XHJcblxyXG4gIGlmICghYXNzZXRJZCB8fCAhcGRmQmFzZTY0KSB7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJhc3NldElkIGV0IHBkZkJhc2U2NCByZXF1aXNcIiB9KTtcclxuICB9XHJcblxyXG4gIC8vIDIpIE1hcHBpbmcgYXNzZXRfaWQgLT4gcmVzX2lkIChtZXRzIHRlcyB2cmFpZXMgY29ycmVzcG9uZGFuY2VzIGljaSlcclxuICBjb25zdCBhc3NldE1hcCA9IHtcclxuICAgIEFDMTogMSxcclxuICAgIEFDMjogMTA0LFxyXG4gICAgQUMzOiAxNDcsXHJcbiAgICBBQzQ6IDMyMixcclxuICAgIEFEMTogMjE0MyxcclxuICAgIEFEMjogMjIxOCxcclxuICAgIEFEMzogMjIyNyxcclxuICB9O1xyXG5cclxuICBjb25zdCByZXNJZCA9IGFzc2V0TWFwW2Fzc2V0SWRdO1xyXG4gIGlmICghcmVzSWQpIHtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBgUGFzIGRlIG1hcHBpbmcgcG91ciBBc3NldCAke2Fzc2V0SWR9YCB9KTtcclxuICB9XHJcblxyXG4gIC8vIC0tLS0gSGVscGVycyAtLS0tXHJcblxyXG4gIC8vIENvbnZlcnRpdCB2ZXJzIGZsb2F0IGFycm9uZGkgw6AgMSBkw6ljaW1hbGUsIGfDqHJlIFwiNyw1XCIsIHZpZGUgPT4gbnVsbFxyXG4gIGNvbnN0IGFzRmxvYXQxID0gKHYpID0+IHtcclxuICAgIGlmICh2ID09PSBudWxsIHx8IHYgPT09IHVuZGVmaW5lZCB8fCB2ID09PSBcIlwiKSByZXR1cm4gbnVsbDtcclxuICAgIGNvbnN0IHMgPSBTdHJpbmcodikudHJpbSgpLnJlcGxhY2UoL1xccy9nLCBcIlwiKS5yZXBsYWNlKFwiLFwiLCBcIi5cIik7XHJcbiAgICBjb25zdCBuID0gTnVtYmVyKHMpO1xyXG4gICAgaWYgKE51bWJlci5pc05hTihuKSkgcmV0dXJuIG51bGw7XHJcbiAgICByZXR1cm4gTWF0aC5yb3VuZChuICogMTApIC8gMTA7XHJcbiAgfTtcclxuXHJcbiAgLy8gQXBwZWwgSlNPTi1SUEMgZ8OpbsOpcmlxdWVcclxuICBhc3luYyBmdW5jdGlvbiBvZG9vUnBjKG1vZGVsLCBtZXRob2QsIC4uLm9kb29BcmdzKSB7XHJcbiAgICBjb25zdCBwYXlsb2FkID0ge1xyXG4gICAgICBqc29ucnBjOiBcIjIuMFwiLFxyXG4gICAgICBtZXRob2Q6IFwiY2FsbFwiLFxyXG4gICAgICBwYXJhbXM6IHtcclxuICAgICAgICBzZXJ2aWNlOiBcIm9iamVjdFwiLFxyXG4gICAgICAgIG1ldGhvZDogXCJleGVjdXRlX2t3XCIsXHJcbiAgICAgICAgYXJnczogW1xyXG4gICAgICAgICAgcHJvY2Vzcy5lbnYuT0RPT19EQixcclxuICAgICAgICAgIHBhcnNlSW50KHByb2Nlc3MuZW52Lk9ET09fVUlELCAxMCksXHJcbiAgICAgICAgICBwcm9jZXNzLmVudi5PRE9PX0FQSV9LRVksXHJcbiAgICAgICAgICBtb2RlbCxcclxuICAgICAgICAgIG1ldGhvZCxcclxuICAgICAgICAgIC4uLm9kb29BcmdzLFxyXG4gICAgICAgIF0sXHJcbiAgICAgIH0sXHJcbiAgICAgIGlkOiBEYXRlLm5vdygpLFxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCByID0gYXdhaXQgZmV0Y2goYCR7cHJvY2Vzcy5lbnYuT0RPT19VUkx9L2pzb25ycGNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHsgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocGF5bG9hZCksXHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgci5qc29uKCk7XHJcbiAgICBpZiAoZGF0YT8uZXJyb3IpIHtcclxuICAgICAgLy8gcmVtb250ZSBs4oCZZXJyZXVyIE9kb28gbGlzaWJsZVxyXG4gICAgICBjb25zdCBtc2cgPVxyXG4gICAgICAgIHR5cGVvZiBkYXRhLmVycm9yID09PSBcInN0cmluZ1wiXHJcbiAgICAgICAgICA/IGRhdGEuZXJyb3JcclxuICAgICAgICAgIDogSlNPTi5zdHJpbmdpZnkoZGF0YS5lcnJvciwgbnVsbCwgMik7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihtc2cpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRhdGEucmVzdWx0O1xyXG4gIH1cclxuXHJcbiAgLy8gQ2hhbXBzIMOgIMOpY3JpcmUgKGZsb2F0IDEgZMOpY2ltYWxlIG91IG51bGwpXHJcbiAgY29uc3QgZmllbGRzVG9Xcml0ZSA9IHtcclxuICAgIGJ1aWxkaW5nX2VudmVsb3BlOiBhc0Zsb2F0MShidWlsZGluZ19lbnZlbG9wZSksXHJcbiAgICBleHRlcmlvcl9mYWNpbGl0aWVzOiBhc0Zsb2F0MShleHRlcmlvcl9mYWNpbGl0aWVzKSxcclxuICAgIGludGVyaW9yX2FyZWFzOiBhc0Zsb2F0MShpbnRlcmlvcl9hcmVhcyksXHJcbiAgICB0ZWNobmljYWxfZXF1aXBtZW50OiBhc0Zsb2F0MSh0ZWNobmljYWxfZXF1aXBtZW50KSxcclxuICAgIHN1c3RhaW5hYmlsaXR5X2VzZzogYXNGbG9hdDEoc3VzdGFpbmFiaWxpdHlfZXNnKSxcclxuICAgIHNpZ25pZmljYW50X3N0cnVjdHVyYWxfZGVmZWN0czogYXNGbG9hdDEoc2lnbmlmaWNhbnRfc3RydWN0dXJhbF9kZWZlY3RzKSxcclxuICAgIGxvY2F0aW9uX21hcmtldF9zaXR1YXRpb246IGFzRmxvYXQxKGxvY2F0aW9uX21hcmtldF9zaXR1YXRpb24pLFxyXG4gIH07XHJcblxyXG4gIC8vIE5ldHRvaWUgbGVzIHVuZGVmaW5lZCAoT2RvbyBu4oCZYWltZSBwYXMgdHJvcClcclxuICBmb3IgKGNvbnN0IGsgb2YgT2JqZWN0LmtleXMoZmllbGRzVG9Xcml0ZSkpIHtcclxuICAgIGlmIChmaWVsZHNUb1dyaXRlW2tdID09PSB1bmRlZmluZWQpIGZpZWxkc1RvV3JpdGVba10gPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgLy8gMykgQnVpbGQgcGF5bG9hZCBhdHRhY2hlbWVudCBQREYgKGNyw6nDqSBzdXIgcHJvcGVydHkucHJvcGVydHkpXHJcbiAgY29uc3QgYXR0YWNoQXJncyA9IFtcclxuICAgIFwiaXIuYXR0YWNobWVudFwiLFxyXG4gICAgXCJjcmVhdGVcIixcclxuICAgIFtcclxuICAgICAge1xyXG4gICAgICAgIG5hbWU6IGBQcnVlZmJlcmljaHRfJHthc3NldElkfV8ke2RhdGUgfHwgXCJcIn0ucGRmYCxcclxuICAgICAgICBkYXRhczogcGRmQmFzZTY0LFxyXG4gICAgICAgIG1pbWV0eXBlOiBcImFwcGxpY2F0aW9uL3BkZlwiLFxyXG4gICAgICAgIHJlc19tb2RlbDogXCJwcm9wZXJ0eS5wcm9wZXJ0eVwiLFxyXG4gICAgICAgIHJlc19pZDogcmVzSWQsXHJcbiAgICAgIH0sXHJcbiAgICBdLFxyXG4gIF07XHJcblxyXG4gIHRyeSB7XHJcbiAgICAvLyAoQSkgY3LDqWVyIGzigJlhdHRhY2hlbWVudFxyXG4gICAgY29uc3QgYXR0YWNobWVudElkID0gYXdhaXQgb2Rvb1JwYyguLi5hdHRhY2hBcmdzKTtcclxuXHJcbiAgICAvLyAoQikgw6ljcmlyZSBsZXMgNyBjaGFtcHMgc3VyIHByb3BlcnR5LnByb3BlcnR5XHJcbiAgICBjb25zdCB3cml0ZU9rID0gYXdhaXQgb2Rvb1JwYyhcclxuICAgICAgXCJwcm9wZXJ0eS5wcm9wZXJ0eVwiLFxyXG4gICAgICBcIndyaXRlXCIsXHJcbiAgICAgIFtbcmVzSWRdLCBmaWVsZHNUb1dyaXRlXVxyXG4gICAgKTtcclxuXHJcbiAgICAvLyAoQykgcmVhZC1iYWNrIHBvdXIgdsOpcmlmaWVyIGNlIHF1aSBlc3QgdnJhaW1lbnQgc3RvY2vDqVxyXG4gICAgY29uc3QgcmVhZEJhY2sgPSBhd2FpdCBvZG9vUnBjKFxyXG4gICAgICBcInByb3BlcnR5LnByb3BlcnR5XCIsXHJcbiAgICAgIFwicmVhZFwiLFxyXG4gICAgICBbW3Jlc0lkXSwgT2JqZWN0LmtleXMoZmllbGRzVG9Xcml0ZSldXHJcbiAgICApO1xyXG5cclxuICAgIC8vIENvbXBhcmUgYnJ1dCAoYXR0ZW50aW9uOiBPZG9vIHBldXQgYXJyb25kaXIvZm9ybWF0dGVyKVxyXG4gICAgY29uc3QgYmVmb3JlQWZ0ZXIgPSB7fTtcclxuICAgIGZvciAoY29uc3QgayBvZiBPYmplY3Qua2V5cyhmaWVsZHNUb1dyaXRlKSkge1xyXG4gICAgICBiZWZvcmVBZnRlcltrXSA9IHtcclxuICAgICAgICBzZW50OiBmaWVsZHNUb1dyaXRlW2tdLFxyXG4gICAgICAgIHN0b3JlZDogcmVhZEJhY2s/LlswXT8uW2tdID8/IG51bGwsXHJcbiAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRMOpdGVjdGVyIHNpIGF1IG1vaW5zIHVuZSB2YWxldXIgY29ycmVzcG9uZCAoY2hhbmdlbWVudCB2aXNpYmxlKVxyXG4gICAgY29uc3QgcHJvcGVydHlXcml0ZUNoYW5nZWQgPSBPYmplY3Qua2V5cyhiZWZvcmVBZnRlcikuc29tZSgoaykgPT4ge1xyXG4gICAgICAvLyBDb21wYXJhaXNvbiB0b2zDqXJhbnRlIGF1eCBmbG9hdHMgKGFycm9uZGkgMSBkw6ljaW1hbGUpXHJcbiAgICAgIGNvbnN0IHNlbnQgPSBiZWZvcmVBZnRlcltrXS5zZW50O1xyXG4gICAgICBjb25zdCBzdG9yZWQgPSBiZWZvcmVBZnRlcltrXS5zdG9yZWQ7XHJcbiAgICAgIGlmIChzZW50ID09PSBudWxsICYmIHN0b3JlZCA9PT0gbnVsbCkgcmV0dXJuIHRydWU7XHJcbiAgICAgIGlmIChzZW50ID09PSBudWxsIHx8IHN0b3JlZCA9PT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICByZXR1cm4gTWF0aC5yb3VuZChOdW1iZXIoc3RvcmVkKSAqIDEwKSA9PT0gTWF0aC5yb3VuZChOdW1iZXIoc2VudCkgKiAxMCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBSw6lwb25zZSBPSyAob24gcmVudm9pZSBhdXNzaSBsZSByZWFkQmFjayBwb3VyIHRyYWNlciBjw7R0w6kgZnJvbnQgc2kgYmVzb2luKVxyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgICAgYXR0YWNobWVudElkLFxyXG4gICAgICB3cml0ZU9rOiB3cml0ZU9rID09PSB0cnVlLFxyXG4gICAgICBwcm9wZXJ0eVdyaXRlQ2hhbmdlZCxcclxuICAgICAgdmFsdWVzOiBiZWZvcmVBZnRlcixcclxuICAgIH0pO1xyXG4gIH0gY2F0Y2ggKGVycikge1xyXG4gICAgLy8gQ2FzIOKAnFBERiBhdHRhY2jDqSBtYWlzIHdyaXRlIEtP4oCdIOKGkiBvbiBu4oCZYSBwYXMgZOKAmWF0dGFjaG1lbnRJZCBmaWFibGUgc2kgbOKAmWVycmV1ciB2aWVudCBhcHLDqHMgKGRvbmMgNTAwIHNpbXBsZSlcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgIGVycm9yOiBlcnIubWVzc2FnZSB8fCBcIkVycmV1ciBpbmNvbm51ZSBjw7R0w6kgT2Rvb1wiLFxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJoYW5kbGVyIiwicmVxIiwicmVzIiwibWV0aG9kIiwic2V0SGVhZGVyIiwic3RhdHVzIiwiZW5kIiwiYXNzZXRJZCIsInBkZkJhc2U2NCIsImRhdGUiLCJidWlsZGluZ19lbnZlbG9wZSIsImV4dGVyaW9yX2ZhY2lsaXRpZXMiLCJpbnRlcmlvcl9hcmVhcyIsInRlY2huaWNhbF9lcXVpcG1lbnQiLCJzdXN0YWluYWJpbGl0eV9lc2ciLCJzaWduaWZpY2FudF9zdHJ1Y3R1cmFsX2RlZmVjdHMiLCJsb2NhdGlvbl9tYXJrZXRfc2l0dWF0aW9uIiwiYm9keSIsImpzb24iLCJlcnJvciIsImFzc2V0TWFwIiwiQUMxIiwiQUMyIiwiQUMzIiwiQUM0IiwiQUQxIiwiQUQyIiwiQUQzIiwicmVzSWQiLCJhc0Zsb2F0MSIsInYiLCJ1bmRlZmluZWQiLCJzIiwiU3RyaW5nIiwidHJpbSIsInJlcGxhY2UiLCJuIiwiTnVtYmVyIiwiaXNOYU4iLCJNYXRoIiwicm91bmQiLCJvZG9vUnBjIiwibW9kZWwiLCJvZG9vQXJncyIsInBheWxvYWQiLCJqc29ucnBjIiwicGFyYW1zIiwic2VydmljZSIsImFyZ3MiLCJwcm9jZXNzIiwiZW52IiwiT0RPT19EQiIsInBhcnNlSW50IiwiT0RPT19VSUQiLCJPRE9PX0FQSV9LRVkiLCJpZCIsIkRhdGUiLCJub3ciLCJyIiwiZmV0Y2giLCJPRE9PX1VSTCIsImhlYWRlcnMiLCJKU09OIiwic3RyaW5naWZ5IiwiZGF0YSIsIm1zZyIsIkVycm9yIiwicmVzdWx0IiwiZmllbGRzVG9Xcml0ZSIsImsiLCJPYmplY3QiLCJrZXlzIiwiYXR0YWNoQXJncyIsIm5hbWUiLCJkYXRhcyIsIm1pbWV0eXBlIiwicmVzX21vZGVsIiwicmVzX2lkIiwiYXR0YWNobWVudElkIiwid3JpdGVPayIsInJlYWRCYWNrIiwiYmVmb3JlQWZ0ZXIiLCJzZW50Iiwic3RvcmVkIiwicHJvcGVydHlXcml0ZUNoYW5nZWQiLCJzb21lIiwidmFsdWVzIiwiZXJyIiwibWVzc2FnZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/upload-to-odoo.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fupload-to-odoo&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cupload-to-odoo.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();